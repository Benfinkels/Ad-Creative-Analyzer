runtime: nodejs22
instance_class: F2
service: beta
env_variables:
  GCS_BUCKET_NAME: 'ad-analyzer-uploads'

handlers:
  # API routes
  - url: /api/.*
    script: auto
    secure: always

  # Serve all static files with urls ending in a file extension
  - url: /(.*\..+)$
    static_files: build/\1
    upload: build/(.*\..+)$
  # Catch all handler to index.html
  - url: /.*
    static_files: build/index.html
    upload: build/index.html

entrypoint: node server.js
